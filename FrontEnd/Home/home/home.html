<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Ch·ªß</title>
    <link rel="stylesheet" href="../css/home.css">
    <link rel="stylesheet" href="../themify-icons/themify-icons.css">
    <link rel="stylesheet" href="../fontawesome-free-6.7.2-web/css/all.min.css">
    <link rel="icon" type="image/png" sizes="96x96" href="../favicon/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="192x192" href="../favicon/web-app-manifest-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="../favicon/web-app-manifest-512x512.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../favicon/apple-touch-icon.png">
    <link rel="manifest" href="../favicon/site.webmanifest">
    <script src="../../config/api.js"></script>
</head>
<body>
    <div id="loading-overlay" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <header id="header">
        <div class="col-auto">
            <img src="../img/logo.png" alt="Logo" class="logo">
        </div>
    
        <ul class="nav">
            <li><a href="home.html">Trang ch·ªß</a></li>
            <li><a href="../../News/news/news.html">Tin t·ª©c</a></li>
            <li><a href="../../Esports/esports/esport.html">ESPORTS</a></li>
            <li><a href="../../Store/store/store.html">C·ª≠a h√†ng</a></li>
            <li><a href="../../Footer/contact.html">Li√™n h·ªá</a></li>
        </ul>
    
        <div class="col-auto">
            <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button> 
            <button id="search-toggle" onclick="toggleSearchBox()">üîç T√åM KI·∫æM</button>
            <div id="search-box" class="search-box">
                <input type="text" id="search-input" placeholder="Nh·∫≠p t·ª´ kh√≥a..." />
                <button onclick="searchGames()">üîé T√¨m ki·∫øm</button>
            </div>
            <div class="user-menu">
                <div id="userInfo" style="display: none;">
                    <span id="username"></span>
                    <button onclick="handleLogout()" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                    </button>
                </div>
                <div id="authButtons" class="auth-buttons">
                    <a href="../../Login-Register/Login/login.html" class="auth-btn">ƒêƒÉng nh·∫≠p</a>
                    <a href="../../Login-Register/Register/register.html" class="auth-btn">ƒêƒÉng k√Ω</a>
                </div>
            </div>
        </div>
    </header>    

    <section id="hero-section">
        <img src="../img/a1.webp" alt="Banner" class="img-big-banner">
        <h1 class="big-heading">Welcome to WarStorm - Fastest game news updates</h1>
        <button class="call-to-action"><a href="../../News/news/news.html">Kh√°m Ph√° Tin T·ª©c</a></button>
    </section>

    <main id="main-content" class="container">
        <div class="row">
            <!-- Featured News -->
            <section class="col-md-8 featured-news">
                <ul class="list-of-latest-posts">
                    <li>
                        <a href="../../News/details/details1.html">
                            <img src="../img/p1.webp" alt="B√†i vi·∫øt 1">
                            <span>Bom t·∫•n sinh t·ªìn qu√° ch·∫•t l∆∞·ª£ng b·∫•t ng·ªù gi·∫£m gi√° m·∫°nh, th·∫•p nh·∫•t tr√™n Steam cho game th·ªß</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../News/details/details2.html">
                            <img src="../img/p2.webp" alt="B√†i vi·∫øt 2">
                            <span>Tr·∫£i nghi·ªám l√†m John Wick v·ªõi I Am Your Beast - si√™u ph·∫©m h√†nh ƒë·ªông v·ª´a ra m·∫Øt tr√™n iOS</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../News/details/details3.html">
                            <img src="../img/z3.webp" alt="B√†i vi·∫øt 3">
                            <span>ƒê·ªông th√°i m·ªõi c·ªßa Doran tr√™n stream ƒë√£ t·ª± ch·ª©ng minh m·ªôt l√Ω do khi·∫øn Zeus r·ªùi T1</span>
                        </a>
                    </li>
                    <li>
                        <a href="../../News/details/details4.html">
                            <img src="../img/34.webp" alt="B√†i vi·∫øt 4">
                            <span>ƒêTCL m√πa 13: 3 ƒë·ªôi h√¨nh ƒë∆∞·ª£c Riot "h·ªìi sinh" m·∫°nh m·∫Ω, s·∫Øp l√†m tr√πm t·∫°i meta m·ªõi</span>
                        </a>
                    </li>
                </ul>
            </section>

            <!-- Show Title -->
            <div class="col-md-4">
                <div class="show-title">
                    <img src="../img/h1.jpg" alt="·∫¢nh thumbnail b√†i vi·∫øt">
                    <p class="short-description">T·ª±a game hot nh·∫•t tu·∫ßn n√†y v·ªõi nhi·ªÅu c·∫≠p nh·∫≠t m·ªõi.</p>
                    <button class="see-more-btn"><a href="../../Hotgames/hotgame/hotgame.html">Xem Th√™m</a></button>
                </div>

                <!-- Categories -->
                <div class="categories">
                    <h2>Danh m·ª•c Games - Tin t·ª©c</h2>
                    <div class="content">
                        <div class="game-list">
                            <a href="../../Mobilegame/mobilegames/lienquan.html" class="game-card">Li√™n Qu√¢n Mobile</a>
                            <a href="../../Mobilegame/mobilegames/genshin.html" class="game-card">Genshin Impact</a>
                            <a href="../../Mobilegame/mobilegames/pubg.html" class="game-card">PUBG Mobile</a>
                        </div>
                        <div class="news-list">
                            <a href="../../Mobilegame/newsmobilegames/newsmobile.html" class="news-card">
                                <p>C·∫≠p nh·∫≠t tin n√≥ng v·ªÅ th·∫ø gi·ªõi game!</p>
                            </a>
                        </div>
                    </div>
                </div>              
            </div>

            <!-- Video Section -->
            <div class="col-md-12">
                <div class="video-stream text-center">
                    <video id="myVideo" controls loop muted playsinline>
                        <source src="../video/n1_fixed.mp4" type="video/mp4">
                    </video>
                    <audio id="myAudio" loop>
                        <source src="../audio/t1.mp3" type="audio/mp3">
                    </audio>
                </div>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="row mt-4">
            <div class="col-md-4 text-center">
                <a href="../../Sidebar/AboutUS/about us/aboutus.html">
                    <h2 class="about-us">V·ªÅ ch√∫ng t√¥i</h2>
                    <img src="../img/m1.jpg" alt="V·ªÅ Ch√∫ng t√¥i" class="sidebar-img">
                </a>
            </div>
        
            <div class="col-md-4 text-center">
                <a href="../../Sidebar/Gameranking/gamerankings/gameranking.html">
                    <h2 class="game-rankings">B·∫£ng x·∫øp h·∫°ng game</h2>
                    <img src="../img/u1.png" alt="B·∫£ng x·∫øp h·∫°ng game" class="sidebar-img">
                </a>
            </div>
        
            <div class="col-md-4 text-center">
                <a href="../../Sidebar/Eventad/eventsad/eventsad.html">
                    <h2 class="events-ad">S·ª± ki·ªán qu·∫£ng c√°o</h2>
                    <img src="../img/u2.png" alt="S·ª± ki·ªán qu·∫£ng c√°o" class="sidebar-img">
                </a>
            </div>
        </div>        
    </main>                    

    <button class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </button>

    <div id="footer" class="container">
        <div class="row">
            <div class="col-md-4">
                <h4 class="information">Th√¥ng tin v·ªÅ WarStorm</h4>
                <p><strong>Gi·ªõi thi·ªáu:</strong> WarStorm l√† m·ªôt n·ªÅn t·∫£ng tin t·ª©c v√† c·ªông ƒë·ªìng d√†nh cho game th·ªß, cung c·∫•p th√¥ng tin m·ªõi nh·∫•t v·ªÅ tr√≤ ch∆°i, b·∫£ng x·∫øp h·∫°ng, v√† s·ª± ki·ªán game.</p>
                <p><strong>M·ª•c ti√™u:</strong>Ch√∫ng t√¥i h∆∞·ªõng t·ªõi vi·ªác tr·ªü th√†nh trang web h√†ng ƒë·∫ßu v·ªÅ tin t·ª©c game, gi√∫p game th·ªß c·∫≠p nh·∫≠t th√¥ng tin nhanh ch√≥ng v√† ch√≠nh x√°c.</p>
                <p class="contact"><a href="../../Footer/contact.html">Li√™n h·ªá</a></p>
            </div>

            <div class="col-md-4">
                <h4 class="social">Li√™n k·∫øt m·∫°ng x√£ h·ªôi:</h4>
                <a href="https://www.facebook.com/WarStorm" target="_blank"><i class="ti-facebook"></i></a>
                <a href="https://www.youtube.com/@WarStorm" target="_blank"><i class="ti-youtube"></i></a>
                <a href="https://discord.gg/warstorm" target="_blank"><i class="fa-brands fa-discord"></i></a>
            </div>

            <div class="col-md-4">
                <h3 class="policies-terms">
                    <a href="../../Footer/privacy-policy.html">Ch√≠nh s√°ch b·∫£o m·∫≠t</a>
                    <a href="../../Footer/terms-and-conditions.html">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a>
                </h3>
            </div>
        </div>
    </div>
</body>
<script>
    // Th√™m d·ªØ li·ªáu t√¨m ki·∫øm cho c√°c trang
    const searchData = [
        { title: "Tin t·ª©c Game", url: "../../News/news/news.html", type: "news" },
        { title: "ESPORTS", url: "../../Esports/esports/esport.html", type: "esports" },
        { title: "C·ª≠a h√†ng Gaming Gear", url: "../../Store/store/store.html", type: "store" },
        { title: "Li√™n h·ªá", url: "../../Footer/contact.html", type: "contact" },
        { title: "Li√™n Qu√¢n Mobile", url: "../../Mobilegame/mobilegames/lienquan.html", type: "game" },
        { title: "Genshin Impact", url: "../../Mobilegame/mobilegames/genshin.html", type: "game" },
        { title: "PUBG Mobile", url: "../../Mobilegame/mobilegames/pubg.html", type: "game" }
    ];

    function searchGames() {
        const keyword = document.getElementById("search-input").value.toLowerCase();
        const searchBox = document.querySelector('.search-box');
        
        // X√≥a k·∫øt qu·∫£ c≈©
        const oldResults = document.querySelector('.search-results');
        if (oldResults) oldResults.remove();
        
        // T√¨m ki·∫øm
        const results = searchData.filter(item => 
            item.title.toLowerCase().includes(keyword) ||
            item.type.toLowerCase().includes(keyword)
        );

        // T·∫°o v√† hi·ªÉn th·ªã k·∫øt qu·∫£
        const resultsDiv = document.createElement('div');
        resultsDiv.className = 'search-results';
        
        if (results.length > 0) {
            resultsDiv.innerHTML = results.map(result => `
                <a href="${result.url}" class="search-result-item ${result.type}">
                    <span class="result-title">${result.title}</span>
                    <span class="result-type">${result.type}</span>
                </a>
            `).join('');
        } else {
            resultsDiv.innerHTML = '<div class="no-results">Kh√¥ng t√¨m th·∫•y k·∫øt qu·∫£</div>';
        }
        
        searchBox.appendChild(resultsDiv);
    }

    function toggleSearchBox() {
        const searchBox = document.getElementById("search-box");
        searchBox.classList.toggle("active");
        
        if (!searchBox.classList.contains('active')) {
            document.getElementById("search-input").value = '';
            const results = document.querySelector('.search-results');
            if (results) results.remove();
        }
    }

    function toggleMenu() {
        const nav = document.querySelector(".nav");
        nav?.classList.toggle("active");
    }

    document.addEventListener("DOMContentLoaded", function() {
        // Video and Audio Setup
        const video = document.getElementById("myVideo");
        const audio = document.getElementById("myAudio");
        
        if (video && audio) {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        video.play().catch(e => console.log("Video autoplay prevented"));
                    } else {
                        video.pause();
                    }
                });
            }, { threshold: 0.5 });

            video.onplay = () => audio.play().catch(e => console.log("Audio autoplay prevented"));
            video.onpause = () => audio.pause();
            video.ontimeupdate = () => audio.currentTime = video.currentTime;
            video.onvolumechange = () => {
                audio.muted = video.muted;
                audio.volume = video.volume;
            };

            observer.observe(video);
        }

        // Back to Top Button
        const backToTop = document.getElementById('backToTop');
        if (backToTop) {
            window.addEventListener('scroll', function() {
                backToTop.classList.toggle('visible', window.scrollY > 300);
            });

            backToTop.addEventListener('click', function() {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }

        // Ki·ªÉm tra tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
        function checkLoginStatus() {
            const userInfo = document.getElementById('userInfo');
            const authButtons = document.getElementById('authButtons');
            const usernameSpan = document.getElementById('username');
            
            // L·∫•y th√¥ng tin user t·ª´ localStorage
            const user = JSON.parse(localStorage.getItem('currentUser'));
            
            if (user) {
                // ƒê√£ ƒëƒÉng nh·∫≠p
                userInfo.style.display = 'flex';
                authButtons.style.display = 'none';
                usernameSpan.textContent = `Xin ch√†o, ${user.username}`;
            } else {
                // Ch∆∞a ƒëƒÉng nh·∫≠p
                userInfo.style.display = 'none';
                authButtons.style.display = 'flex';
            }
        }

        // X·ª≠ l√Ω ƒëƒÉng xu·∫•t
        window.handleLogout = function() {
            localStorage.removeItem('currentUser');
            checkLoginStatus();
            window.location.href = '../../Login-Register/Login/login.html';
        };

        // Ki·ªÉm tra tr·∫°ng th√°i ƒëƒÉng nh·∫≠p khi trang load
        checkLoginStatus();

        // Update Auth Section
        function updateAuthSection() {
            const authSection = document.getElementById('auth-section');
            if (!authSection) return;

            try {
                const currentUser = JSON.parse(localStorage.getItem('currentUser'));
                if (currentUser && currentUser.username) {
                    const userInitial = currentUser.username.charAt(0).toUpperCase();
                    authSection.innerHTML = `
                        <div class="user-info">
                            <div class="user-avatar">${userInitial}</div>
                            <span>${currentUser.username}</span>
                            <button onclick="handleLogout()" class="logout-btn">
                                <i class="fas fa-sign-out-alt"></i> ƒêƒÉng xu·∫•t
                            </button>
                        </div>
                    `;
                } else {
                    authSection.innerHTML = `
                        <a href="../../Login-Register/Login/login.html" class="login-register-btn-header">
                            <i class="fas fa-user"></i> ƒêƒÉng nh·∫≠p
                        </a>
                    `;
                }
            } catch (error) {
                console.error('Error updating auth section:', error);
            }
        }

        // Initialize auth section
        updateAuthSection();
    });

    // Loading Overlay
    window.addEventListener('load', function() {
        const loadingOverlay = document.getElementById('loading-overlay');
        if (loadingOverlay) {
            loadingOverlay.style.display = 'none';
        }
    });
</script>
</body>
</html>